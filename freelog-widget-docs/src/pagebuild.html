

<freelog-widget-docs class="js-wc-widget">
  <style>
    .freelog-widget-docs-app header.nav-bar {
      box-sizing: border-box;
      position: fixed; top: 0; right: 0; left: 0; z-index: 2000;
      height: 60px; border-bottom: 1px solid #eaecef;
      background-color: #fff;
    }
    .site-name, .docs-menu-btn { visibility: hidden; }
    .freelog-widget-docs-app .site-name,
    .freelog-widget-docs-app .site-name h2,
    .freelog-widget-docs-app .site-name .f-loading-spinner, 
    .freelog-widget-docs-app .site-name .sidebar-toggle-btn{
      display: inline-block;
    }
    
    .freelog-widget-docs-app .docs-menu-btn {
      float: right; cursor: pointer;
      width: 34px; height: 34px; line-height: 34px; margin-top: 12px; margin-right: 20px;
      font-size: 20px; text-align: center; 
    }
    .freelog-widget-docs-app .docs-menu-btn a{ color: #333; }
    .freelog-widget-docs-app .docs-menu-btn a:hover { color: #409EFF; }
  </style>
  <div class="freelog-widget-docs-app">
    <header class="nav-bar">
      <div class="site-name" :class="{'visible': siteName}">
        <div class="f-loading-spinner">
          <a href="https://console.freelog.com" target="_blank" class="">F</a>
        </div>
        <div class="sidebar-toggle-btn" :class="{'open': sidebarVisible}" v-if="!homePageVisible" @click="toggleSidebar">
          <span></span>
          <span></span>
          <span></span>
        </div>
        <h2>{{docsName || siteName}}</h2>
      </div>
      <div class="docs-menu-btn" :class="{ 'visible': !homePageVisible }" >
        <a href="#"><i class="el-icon-s-home"></i></a>
      </div>
    </header> 
  
    <template v-if="homePageVisible">
      <div class="docs-list-page">
        <div class="docs" v-for="docs in docsList" >
          <el-card :body-style="{ padding: '0px' }">
            <a :href="'#/' + docs.presentableName">
              <img :src="docs.previewUrl" class="image">
              <div style="padding: 14px;">
                <span>{{docs.presentableName}}</span>
                <div class="bottom clearfix">
                  <time class="time">{{ docs.updateDate }}</time>
                </div>
              </div>
            </a>
          </el-card>
        </div>
        <div class="docs-placeholder"></div>
        <div class="docs-placeholder"></div>
        <div class="docs-placeholder"></div>
        <div class="docs-placeholder"></div>
      </div>
    </template>
    
    <template v-if="catalogTreeData.length && !homePageVisible">
      <aside :class="{ 'visible': sidebarVisible }" id="docs-sidebar">
        <ul class="sidebar-links">
          <sidebar-item 
            :docs-name="docsName"
            v-for="(item, index) in catalogTreeData" 
            :key="'item-'+(index+1)" 
            :index="index"
            :data="item"></sidebar-item>
        </ul>
      </aside>
      <main @click="sidebarVisible = false">
        <div class="content" ref="mdViewer" v-show="activeMdData != null"></div>
        <div class="empty-content" v-show="activeMdData == null">markdown文件未上线...</div>
        <div class="page-nav" :class="{ 'visible': activeReleaseId !== '' }" v-show="!loadingVisible && activeMdData != null">
          <p class="inner">
            <span class="prev" v-if="prevItem">
              <i class="el-icon-back"></i>
              <a :href="'#/' + docsName + '/' + prevItem.title" >{{prevItem.title}}</a>
            </span>
            <span class="next" v-if="nextItem">
              <a :href="'#/' + docsName + '/' + nextItem.title" >{{nextItem.title}}</a>
              <i class="el-icon-right"></i>
            </span>
          </p>
        </div>
        <div class="f-loading" :class="{'visible': loadingVisible}" >
          <div class="f-loading-inner">
            <!-- <div class="f-loading-spinner">F</div> -->
            <p class="f-loading-message">Loading...</p>
          </div>
        </div>
      </main>
    </template>
    <template v-if="catalogTreeData.length === 0 && !homePageVisible">
      <div class="docs-error-box">
        <p class="" v-html="catalogErrorText"></p>
      </div>
    </template>
  </div>
  
  <template id="docs-sidebar-item">
    <li class="sidebar-item">
      <a  
        class="sidebar-link"
        v-if="data.releaseId"
        :href="'#/' + docsName + '/' + data.title" 
        :class="{ 'active': $root.activeReleaseId === data.releaseId }"
        @click="tapSidebarItem(data)">{{data.title}}</a>
      <p class="sidebar-title" v-else><span>{{data.title}}</span></p>
      <ul class="sub-list" v-if="data.children">
        <sidebar-item 
          v-for="(subItem, subIndex) in data.children" 
          :docs-name="docsName"
          :key="'sub-item-'+(subIndex+1)" 
          :index="subIndex"
          :data="subItem"></sidebar-item>
      </ul>
    </li>
  </template>
</freelog-widget-docs>
